#N canvas 94 82 1159 781 12;
#X obj 76 28 inlet;
#X text 212 16 args \; \$1 voice number \; \$2 parent \$0 \;;
#X msg 81 290 read -resize \$1 \$2-sample-array-\$3;
#X obj 81 227 pack s \$2 \$1;
#X obj 81 369 soundfiler, f 23;
#X obj 350 23 array define \$2-sample-array-\$1;
#X obj 81 179 route read;
#X obj 474 673 tabread4~ \$2-sample-array-\$1;
#X obj 49 453 array size \$2-sample-array-\$1, f 21;
#X obj 49 256 t b l;
#X text 95 333 load audio into ram;
#X obj 114 426 s \$2-samplerate-\$1;
#X obj 59 498 s \$2-size-\$1;
#X msg 249 393 \$1;
#X obj 49 533 /, f 29;
#X obj 76 57 s \$2-inlet-\$1;
#X obj 81 156 r \$2-inlet-\$1;
#X obj 474 122 r \$2-inlet-\$1;
#X obj 48 564 s \$2-duration-\$1;
#X obj 474 155 route play;
#X obj 474 568 phasor~, f 38;
#X msg 737 527 0;
#X msg 474 509 0;
#X obj 474 230 sel 0 1, f 54;
#X obj 705 462 /;
#X obj 723 431 r \$2-duration-\$1;
#X obj 705 399 f 1;
#X obj 705 493 t f b;
#X obj 474 708 hip~ 5;
#X obj 474 746 outlet~;
#X obj 474 632 *~;
#X obj 492 601 r \$2-samplerate-\$1;
#X obj 537 331 r \$2-get-loop;
#X obj 474 202 > 0;
#X text 507 204 todo - handle velocity;
#X obj 530 411 r \$2-duration-\$1;
#X obj 537 355 == 0;
#X obj 498 379 spigot;
#X obj 498 283 t b b, f 30;
#X obj 498 459 delay;
#X text 543 458 cue stop;
#X obj 530 435 * 1000;
#X text 350 47 example read message \; read -resize /Users/bob/repos/bop/samples/bank000/PreparedPiano093.wav 11-sample-array-1003, f 97;
#X text 914 272 todo: make play message \; [target] play [pitch] [velocity];
#X text 927 438 todo: how to get real-time pitch control?, f 15;
#X text 926 520 May need to watch phasor~ for end of cycle instead of cueing a stop bang. use threshold~. \; This could occur after an ADSR (or just AR) and also trigger a [switch~] \;, f 22;
#X obj 929 492 r~ \$2-get-tune;
#X connect 0 0 15 0;
#X connect 2 0 4 0;
#X connect 3 0 9 0;
#X connect 4 1 13 0;
#X connect 6 0 3 0;
#X connect 7 0 28 0;
#X connect 8 0 12 0;
#X connect 8 0 14 0;
#X connect 9 0 8 0;
#X connect 9 1 2 0;
#X connect 13 0 11 0;
#X connect 13 0 14 1;
#X connect 14 0 18 0;
#X connect 16 0 6 0;
#X connect 17 0 19 0;
#X connect 19 0 33 0;
#X connect 20 0 30 0;
#X connect 21 0 20 1;
#X connect 22 0 20 0;
#X connect 23 0 22 0;
#X connect 23 1 38 0;
#X connect 24 0 27 0;
#X connect 25 0 24 1;
#X connect 26 0 24 0;
#X connect 27 0 20 0;
#X connect 27 1 21 0;
#X connect 28 0 29 0;
#X connect 30 0 7 0;
#X connect 31 0 30 1;
#X connect 32 0 36 0;
#X connect 33 0 23 0;
#X connect 35 0 41 0;
#X connect 36 0 37 1;
#X connect 37 0 39 0;
#X connect 38 0 37 0;
#X connect 38 1 26 0;
#X connect 39 0 22 0;
#X connect 41 0 39 1;
