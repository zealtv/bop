#N canvas 63 100 858 691 12;
#X declare -path ./bop.p;
#X obj 110 130 bop.p.param \$0 noteslider;
#X obj 110 220 bop.p.number \$0 octaves;
#X obj 110 160 bop.p.number \$0 scale;
#X obj 110 181 bop.p.enum \$0 scale;
#X obj 91 523 s \$0-set-scale-enum;
#X obj 91 410 loadbang;
#N canvas 525 37 935 829 notelist 0;
#X obj 399 260 change;
#X obj 399 203 int;
#X text 409 224 < current note, f 10;
#X obj 582 212 > 0;
#X obj 582 245 * 127;
#X text 623 245 < current velocity;
#X msg 201 359 0 2 3 5 7 9 10 12 14 15 17 19 21 22 24 26 27 29 31 33 34 36 38 39 41 43 45 46 48 50 51 53 55 57 58 60 62 63 65 67 69 70, f 19;
#X obj 399 295 t b f, f 13;
#X obj 484 769 pack, f 5;
#X msg 601 884 0;
#X text 630 880 < store last note to send note off on next note, f 18;
#X msg 582 722 0;
#X obj 484 807 t l b, f 20;
#X obj 613 313 sel 0;
#X obj 613 282 change;
#X text 661 309 < send note off when under thresh, f 18;
#X obj 613 344 s \$0-noteoff;
#X text 460 637 < scale offset;
#X obj 624 846 r \$0-noteoff;
#N canvas 687 194 783 728 scalemaker 0;
#X obj 241 147 inlet;
#X obj 227 817 outlet;
#X msg 280 437 0 2 4 7 9;
#X obj 311 322 bng 15 250 50 0 empty empty empty 17 7 0 10 #fcfcfc #000000 #000000;
#X msg 538 665 set;
#X floatatom 372 459 5 0 0 0 - - - 0;
#X obj 414 449 + 12;
#X obj 311 379 t b b;
#X obj 355 651 + 0;
#X msg 372 377 set 0;
#X obj 549 321 bng 15 250 50 0 empty empty empty 17 7 0 10 #fcfcfc #000000 #000000;
#X text 54 438 scale as semi-tone steps >;
#X msg 227 777;
#X floatatom 241 179 5 0 0 0 - - - 0;
#X obj 241 205 t b f b, f 52;
#X msg 415 479 set \$1;
#X msg 355 679 add2 \$1;
#X obj 121 316 list prepend set;
#X obj 121 346 list trim;
#X obj 310 284 until;
#X obj 278 576 bop.p.iter;
#N canvas 75 167 1325 640 scales 0;
#X obj 75 16 inlet;
#X obj 812 556 outlet;
#X msg 182 138 0 2 4 7 9;
#X msg 267 138 0 3 5 7 10;
#X msg 352 138 0 3 5 6 7 10;
#X obj 470 138 sel ionian dorian phrygian lydian mixolydian aeolian locrain, f 61;
#X obj 182 100 sel major-pentatonic minor-pentatonic blues;
#X msg 470 186 0 2 4 5 7 9 11;
#X msg 521 216 0 2 3 5 7 9 10;
#X msg 573 246 0 1 3 5 7 8 10;
#X msg 625 275 0 2 4 6 7 9 11;
#X msg 677 305 0 2 4 5 7 9 10;
#X msg 729 335 0 2 3 5 7 8 10;
#X msg 781 365 0 1 3 5 6 8 10;
#X obj 890 209 sel lydian-dominant diminished whole-tone altered;
#X msg 890 243 0 2 4 6 7 9 10;
#X msg 962 276 0 2 3 5 6 8 9 11;
#X msg 1035 310 0 2 4 6 8 10;
#X msg 1108 339 0 1 3 4 6 8 10;
#X connect 0 0 6 0;
#X connect 2 0 1 0;
#X connect 3 0 1 0;
#X connect 4 0 1 0;
#X connect 5 0 7 0;
#X connect 5 1 8 0;
#X connect 5 2 9 0;
#X connect 5 3 10 0;
#X connect 5 4 11 0;
#X connect 5 5 12 0;
#X connect 5 6 13 0;
#X connect 5 7 14 0;
#X connect 6 0 2 0;
#X connect 6 1 3 0;
#X connect 6 2 4 0;
#X connect 6 3 5 0;
#X connect 7 0 1 0;
#X connect 8 0 1 0;
#X connect 9 0 1 0;
#X connect 10 0 1 0;
#X connect 11 0 1 0;
#X connect 12 0 1 0;
#X connect 13 0 1 0;
#X connect 14 0 15 0;
#X connect 14 1 16 0;
#X connect 14 2 17 0;
#X connect 14 3 18 0;
#X connect 15 0 1 0;
#X connect 16 0 1 0;
#X connect 17 0 1 0;
#X connect 18 0 1 0;
#X restore 122 233 pd scales;
#X obj 81 47 inlet;
#X obj 81 113 t b s, f 8;
#X connect 0 0 13 0;
#X connect 2 0 20 0;
#X connect 3 0 7 0;
#X connect 4 0 12 0;
#X connect 5 0 6 0;
#X connect 5 0 8 1;
#X connect 6 0 15 0;
#X connect 7 0 2 0;
#X connect 7 1 5 0;
#X connect 8 0 16 0;
#X connect 9 0 5 0;
#X connect 10 0 4 0;
#X connect 10 0 9 0;
#X connect 12 0 1 0;
#X connect 13 0 14 0;
#X connect 14 0 12 0;
#X connect 14 1 19 0;
#X connect 14 2 10 0;
#X connect 15 0 5 0;
#X connect 16 0 12 0;
#X connect 17 0 18 0;
#X connect 18 0 2 0;
#X connect 19 0 3 0;
#X connect 20 0 8 0;
#X connect 21 0 17 0;
#X connect 22 0 23 0;
#X connect 23 0 13 0;
#X connect 23 1 21 0;
#X restore 202 152 pd scalemaker;
#X obj 241 241 s \$0-numnotes;
#X obj 510 69 r \$0-numnotes;
#X text 87 390 scale as semi-tone steps >, f 17;
#X obj 423 664 t f f b, f 21;
#X obj 399 163 t f f, f 31;
#X obj 202 187 t b l l;
#X msg 423 835 set \$1;
#X msg 582 662 set \$1;
#X obj 280 87 int;
#X obj 280 117 change;
#X obj 221 270 list prepend set;
#X obj 221 301 list trim;
#X obj 241 217 list length;
#X obj 201 448 list store;
#X msg 600 939 \$1 0;
#X obj 399 132 bop.p.scale 0 1 0 5;
#X obj 423 554 bop.p.nth;
#X obj 399 32 r \$0-get-noteslider;
#X obj 280 57 r \$0-get-octaves;
#X obj 202 20 r \$0-get-scale-enum;
#X obj 485 1034 outlet;
#X obj 850 123 r \$0-get-noteslider;
#X obj 857 156 r \$0-get-scale;
#X obj 857 187 r \$0-get-octaves;
#X obj 950 155 r \$0-get-scale-enum;
#X text 697 702 NOTE ON NOT WORKING;
#X obj 387 932 inlet;
#X obj 444 605 r \$0-get-root;
#X text 534 119 scale slider to number of notes in scale, f 26;
#X obj 508 98 - 1;
#X obj 403 84 * 0.99999;
#X obj 423 637 + 0;
#X connect 0 0 7 0;
#X connect 1 0 0 0;
#X connect 3 0 4 0;
#X connect 4 0 14 0;
#X connect 4 0 27 0;
#X connect 6 0 33 0;
#X connect 7 0 6 0;
#X connect 7 1 36 1;
#X connect 8 0 12 0;
#X connect 9 0 34 0;
#X connect 11 0 8 1;
#X connect 12 0 40 0;
#X connect 12 1 9 0;
#X connect 13 0 16 0;
#X connect 14 0 13 0;
#X connect 18 0 9 0;
#X connect 19 0 25 0;
#X connect 21 0 49 0;
#X connect 23 0 26 0;
#X connect 23 1 8 0;
#X connect 23 2 11 0;
#X connect 24 0 1 0;
#X connect 24 1 3 0;
#X connect 25 0 6 0;
#X connect 25 1 30 0;
#X connect 25 2 32 0;
#X connect 26 0 9 0;
#X connect 27 0 11 0;
#X connect 28 0 29 0;
#X connect 29 0 19 1;
#X connect 30 0 31 0;
#X connect 31 0 6 0;
#X connect 32 0 20 0;
#X connect 33 0 36 0;
#X connect 34 0 40 0;
#X connect 35 0 24 0;
#X connect 36 0 51 0;
#X connect 37 0 50 0;
#X connect 38 0 28 0;
#X connect 39 0 19 0;
#X connect 46 0 40 0;
#X connect 47 0 51 1;
#X connect 49 0 35 4;
#X connect 50 0 35 0;
#X connect 51 0 23 0;
#X restore 490 352 pd notelist;
#X obj 559 583 savestate, f 17;
#X obj 558 556 bop.p.autosave \$0;
#X text 399 504 Other messages get picked up in the bop.p.param \, bop.p.toggle \, and bop.p.number objects, f 20;
#X obj 477 124 inlet~, f 12;
#X text 556 503 ... and are stored in here when the parent patch is saved, f 22;
#X obj 546 235 outlet;
#X obj 477 224 outlet~;
#X obj 490 299 r \$0-midi-in;
#X obj 490 411 s \$0-midi-out;
#X obj 110 200 bop.p.number \$0 root;
#X obj 546 168 bop.p.inout \$0;
#X obj 91 321 loadbang;
#X obj 91 369 s \$0-set-octaves;
#X msg 91 348 range 1 6;
#X text 569 351 Magic is here;
#X text 565 194 < MIDI and messages dump out of right, f 13;
#X text 427 158 Signal out of left >, f 9;
#X text 556 144 < midi and messages;
#X obj 428 71 declare -path ./bop.p;
#X msg 91 436 major-pentatonic minor-pentatonic blues ionian dorian phygian lydian mixolydian aeolian locrian lydian-dominant diminished whole-tone altered, f 28;
#X connect 5 0 26 0;
#X connect 6 0 15 0;
#X connect 7 0 8 1;
#X connect 7 1 8 0;
#X connect 8 0 7 0;
#X connect 10 0 13 0;
#X connect 10 1 17 0;
#X connect 14 0 6 0;
#X connect 17 0 12 0;
#X connect 18 0 20 0;
#X connect 20 0 19 0;
#X connect 26 0 4 0;
#X coords 0 -1 1 1 166 150 1 100 100;
